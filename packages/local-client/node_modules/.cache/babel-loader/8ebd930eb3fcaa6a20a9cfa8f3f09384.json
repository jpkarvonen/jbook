{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport React, { Component } from 'react';\nimport classnames from 'classnames';\nimport Prism from 'prismjs';\nimport 'prismjs/components/prism-markdown.js';\nimport hotkeys from './hotkeys';\nimport \"./index.css\";\n\nvar TextArea = /*#__PURE__*/function (_Component) {\n  _inherits(TextArea, _Component);\n\n  var _super = _createSuper(TextArea);\n\n  function TextArea(props) {\n    var _this;\n\n    _classCallCheck(this, TextArea);\n\n    _this = _super.call(this, props);\n    _this.preElm = /*#__PURE__*/React.createRef();\n    _this.warp = /*#__PURE__*/React.createRef();\n    _this.text = /*#__PURE__*/React.createRef();\n    _this.state = {\n      value: props.value || ''\n    };\n    return _this;\n  }\n\n  _createClass(TextArea, [{\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      var _this2 = this;\n\n      var onChange = this.props.onChange;\n      this.setState({\n        value: e.target.value\n      }, function () {\n        onChange && onChange(_this2.state.value);\n\n        _this2.highlight();\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this.props.autoFocus && this.text.current) {\n                  this.text.current.focus();\n                }\n\n                this.highlight();\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return nextProps.value !== this.props.value || nextState.value !== this.state.value;\n    }\n  }, {\n    key: \"highlight\",\n    value: function () {\n      var _highlight = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var value, pre, html;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                value = this.state.value;\n                pre = this.preElm.current;\n                html = Prism.highlight(value, Prism.languages.markdown, 'markdown');\n                pre.innerHTML = \"\".concat(html, \"<br />\");\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function highlight() {\n        return _highlight.apply(this, arguments);\n      }\n\n      return highlight;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          prefixCls = _this$props.prefixCls,\n          className = _this$props.className,\n          onChange = _this$props.onChange,\n          onScroll = _this$props.onScroll,\n          tabSize = _this$props.tabSize,\n          style = _this$props.style,\n          otherProps = _objectWithoutProperties(_this$props, [\"prefixCls\", \"className\", \"onChange\", \"onScroll\", \"tabSize\", \"style\"]);\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        ref: this.warp,\n        className: classnames(\"\".concat(prefixCls, \"-aree\"), className),\n        onScroll: onScroll\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: classnames(\"\".concat(prefixCls, \"-text\"))\n      }, /*#__PURE__*/React.createElement(\"pre\", {\n        ref: this.preElm,\n        className: classnames(\"\".concat(prefixCls, \"-text-pre\"), 'wmde-markdown-color')\n      }), /*#__PURE__*/React.createElement(\"textarea\", _extends({}, otherProps, {\n        ref: this.text,\n        onKeyDown: hotkeys.bind(this, {\n          tabSize: tabSize\n        }),\n        className: \"\".concat(prefixCls, \"-text-input\"),\n        value: this.state.value,\n        onChange: this.handleChange.bind(this)\n      }))));\n    }\n  }]);\n\n  return TextArea;\n}(Component);\n\nTextArea.defaultProps = {\n  tabSize: 2,\n  autoFocus: true,\n  spellCheck: false\n};\nTextArea.state = void 0;\nexport { TextArea as default };","map":{"version":3,"mappings":"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","names":["React","Component","classnames","Prism","hotkeys","TextArea","props","_classCallCheck","_this","preElm","createRef","warp","text","state","value","e","onChange","setState","target","_this2","highlight","autoFocus","current","focus","nextProps","nextState","pre","html","languages","markdown","innerHTML","prefixCls","className","onScroll","tabSize","style","otherProps","ref","onKeyDown","bind","handleChange","defaultProps","spellCheck"],"sources":["/Users/karvonen/Valet/udemy-port/local-client/node_modules/@uiw/react-md-editor/src/components/TextArea/index.tsx"],"sourcesContent":["import React, { Component } from 'react';\nimport classnames from 'classnames';\nimport Prism from 'prismjs';\nimport 'prismjs/components/prism-markdown.js';\nimport { IProps } from '../../utils';\nimport hotkeys, { IHotkeyOptions } from './hotkeys';\nimport './index.less';\n\nexport interface ITextAreaProps extends Omit<React.TextareaHTMLAttributes<HTMLTextAreaElement>, 'value' | 'onChange' | 'onScroll'>, IProps {\n  onChange?: (value?: string) => void;\n  onScroll?: (e: React.UIEvent<HTMLDivElement>) => void;\n  value?: string;\n  tabSize?: number;\n}\n\nexport interface ITextAreaState {\n  value?: string;\n}\n\nexport default class TextArea extends Component<ITextAreaProps, ITextAreaState> {\n  public preElm = React.createRef<HTMLPreElement>();\n  public warp = React.createRef<HTMLDivElement>();\n  public text = React.createRef<HTMLTextAreaElement>();\n  public static defaultProps: ITextAreaProps = {\n    tabSize: 2,\n    autoFocus: true,\n    spellCheck: false,\n  }\n  public static state: ITextAreaState;\n  public constructor(props: ITextAreaProps) {\n    super(props);\n    this.state = {\n      value: props.value || '',\n    };\n  }\n  private handleChange(e: React.ChangeEvent<HTMLTextAreaElement>) {\n    const { onChange } = this.props;\n    this.setState({ value: e.target.value }, () => {\n      onChange && onChange(this.state.value);\n      this.highlight();\n    });\n  }\n  public async componentDidMount() {\n    if (this.props.autoFocus && this.text.current) {\n      this.text.current.focus();\n    }\n    this.highlight();\n  }\n  public shouldComponentUpdate(nextProps: ITextAreaProps, nextState: ITextAreaState) {\n    return nextProps.value !== this.props.value || nextState.value !== this.state.value;\n  }\n  public async highlight() {\n    const { value } = this.state;\n    const pre = this.preElm.current;\n    const html = Prism.highlight(value as string, Prism.languages.markdown, 'markdown');\n    pre!.innerHTML = `${html}<br />`;\n  }\n  render() {\n    const { prefixCls, className, onChange, onScroll, tabSize, style, ...otherProps } = this.props;\n    return (\n      <div ref={this.warp} className={classnames(`${prefixCls}-aree`, className)} onScroll={onScroll}>\n        <div className={classnames(`${prefixCls}-text`)}>\n          <pre\n            ref={this.preElm}\n            className={classnames(`${prefixCls}-text-pre`, 'wmde-markdown-color')}\n          />\n          <textarea\n            {...otherProps}\n            ref={this.text}\n            onKeyDown={hotkeys.bind(this, { tabSize } as IHotkeyOptions)}\n            className={`${prefixCls}-text-input`}\n            value={this.state.value}\n            onChange={this.handleChange.bind(this)}\n          />\n        </div>\n      </div>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}